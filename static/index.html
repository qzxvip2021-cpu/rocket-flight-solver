<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rocket Flight Solver</title>
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>

<body>

<h2>ðŸš€ Rocket Flight Solver</h2>

<select id="engine">
  <option>F20-4W</option>
  <option>F23-4FJ</option>
  <option>F42-4T</option>
  <option>F52-8C</option>
</select>

<input id="temp" value="20">
<input id="pressure" value="1015">
<input id="humidity" value="50">
<input id="target" value="750">

<button onclick="run()">Compute</button>

<div id="plot"></div>

<script>
async function run() {
  const payload = {
    engine: engine.value,
    temperature: +temp.value,
    pressure: +pressure.value,
    humidity: +humidity.value,
    target_apogee: +target.value
  };

  const curveResp = await fetch("/api/curve", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(payload)
  });
  const curve = await curveResp.json();

  const solveResp = await fetch("/api/solve", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(payload)
  });
  const sol = await solveResp.json();

  Plotly.newPlot("plot", [
    {
      x: curve.mass,
      y: curve.apogee,
      mode: "lines",
      name: "Predicted apogee"
    },
    {
      x: curve.mass,
      y: curve.apogee_hi,
      line: { width: 0 },
      showlegend: false
    },
    {
      x: curve.mass,
      y: curve.apogee_lo,
      fill: "tonexty",
      name: "Â±1Ïƒ confidence"
    },
    {
      x: [sol.mass],
      y: [sol.H_mean],
      mode: "markers",
      name: "Recommended mass"
    }
  ]);
}
</script>

<hr>

<footer style="
  margin-top: 30px;
  font-size: 12px;
  color: #666;
  text-align: center;
  line-height: 1.6;
">
  Â© 2025 George Qiao. All rights reserved.<br>
  Rocket Flight Solver â€” for educational & competition use only.
</footer>

</body>
</html>

